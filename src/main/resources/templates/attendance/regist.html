<!DOCTYPE html>
<html lang="ja">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Page Example</title>
	<link th:href="@{/css/styles.css}" rel="stylesheet">
	<style>
		.user-info p {
			display: inline-block;
			margin-right: 5px;
			margin-left: 20px;
		}

		.user-info span {
			display: inline-block;
		}
	</style>
</head>

<body>

	<form id="AttendanceForm" th:action="@{/attendance/show}" method="POST">

		<div class="container">
			<div class="user-info">
				<p>ユーザ名：</p><span th:text="${user.name}"></span>
				<p>ユーザID：</p><span name="userId" th:text="${user.id}"></span>
				<input type="hidden" name="userId" th:value="${user.id}">
			</div>
			<div class="header">

				<div class="display-month">
					<label for="yearDropdown">表示年月：</label>
					<select id="yearDropdown" name="year">
						<option value=""></option>
						<option th:each="year : ${#numbers.sequence(2000, 2100)}" th:value="${year}" th:text="${year}"
							th:selected="${year == selectedYear}"></option>
					</select>
					<label for="yearDropdown">年</label>
					<!--					<select id="monthDropdown" name="month"></select>-->
					<select id="yearDropdown" name="month">
						<option value=""></option>
						<option th:each="month : ${#numbers.sequence(1, 12)}" th:value="${month}" th:text="${month}"
							th:selected="${month == selectedMonth}"></option>
					</select>
					<label for="monthDropdown">月</label>
					<div class="buttons">
						<button type="submit" name="show">表示</button>
					</div>

				</div>

				<th:block th:if="${errorMessage}">
					<div class="d-flex flex-column">
						<span th:text="'*' + '&nbsp' + ${errorMessage}" class="help-inline error"></span>
					</div>
				</th:block>

				<div class="buttons">
					<button>却下</button>
					<button>承認</button>
					<button>承認申請</button>

					<button type="submit" name="register">登録</button>

				</div>


			</div>

			<table class="approval-info">
				<thead>
					<tr>
						<th>承認申請者</th>
						<th>申請対象年月</th>
						<th>申請日</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>
							<nav>●●　××</nav>
						</td>
						<td>2024/5/1</td>
						<td>2024/5/30</td>
					</tr>
					<tr>
						<td>
							<nav>△△　▲▲</nav>
						</td>
						<td>2024/5/1</td>
						<td>2024/5/31</td>
					</tr>
				</tbody>
			</table>
			<table class="attendance-info">
				<thead>
					<tr>
						<th>日付</th>
						<th>曜日</th>
						<th>出勤状況</th>
						<th>出勤時間</th>
						<th>退勤時間</th>
						<th>備考</th>
					</tr>
				</thead>
				<tbody id="dateTable">


					<tr th:each="calendera : ${calendar}">

						<td name="formattedDate" th:text="${calendera.formattedDate}">Date</td>
						<input type="hidden" name="formattedDate" th:value="${calendera.formattedDate}">
						<td th:text="${calendera.dayOfWeek}">dayOfWeek</td>
						<td>
							<select name="status">
								<option value="-1" th:selected="${calendera.status == null}"></option>
								<option value="0" th:selected="${calendera.status == 0}">通常出勤</option>
								<option value="1" th:selected="${calendera.status == 1}">休日</option>
								<option value="2" th:selected="${calendera.status == 2}">祝日</option>
								<option value="3" th:selected="${calendera.status == 3}">遅刻</option>
								<option value="4" th:selected="${calendera.status == 4}">有給</option>
								<option value="5" th:selected="${calendera.status == 5}">欠勤</option>
								<option value="6" th:selected="${calendera.status == 6}">早退</option>
								<option value="7" th:selected="${calendera.status == 7}">時間外勤務</option>
								<option value="8" th:selected="${calendera.status == 8}">振替出勤</option>
								<option value="9" th:selected="${calendera.status == 9}">振替休日</option>
								<option value="10" th:selected="${calendera.status == 10}">代替出勤</option>
								<option value="11" th:selected="${calendera.status == 11}">代替休日</option>
							</select>
						</td>

						<td>
							<select name="startHour">
								<option value=""></option>
								<option th:each="hour : ${#numbers.sequence(0,23)}" th:value="${hour}" th:text="${hour}"
									th:selected="${calendera.startTime?.hour == hour}"></option>
							</select>
							:
							<select name="startMinute">
								<option value=""></option>
								<option th:each="minute : ${#numbers.sequence(0,59)}" th:value="${minute}"
									th:text="${minute}" th:selected="${calendera.startTime?.minute == minute}"></option>
							</select>
						</td>
						<td>
							<select name="endHour">
								<option value=""></option>
								<option th:each="hour : ${#numbers.sequence(0,23)}" th:value="${hour}" th:text="${hour}"
									th:selected="${calendera.endTime?.hour == hour}"></option>
							</select>
							:
							<select name="endMinute">
								<option value=""></option>
								<option th:each="minute : ${#numbers.sequence(0,59)}" th:value="${minute}"
									th:text="${minute}" th:selected="${calendera.endTime?.minute == minute}"></option>
							</select>
						</td>

						<td><input type="text" name="remarks" th:value="${calendera.remarks}" /></td>
					</tr>

				</tbody>
			</table>
		</div>
	</form>
	<script>
		document.addEventListener("DOMContentLoaded", function () {
			var yearSelect = document.getElementById("yearDropdown");
			// 初期表示は未入力状態
			var defaultOption = document.createElement("option");
			defaultOption.value = "";
			defaultOption.textContent = "";
			yearSelect.appendChild(defaultOption);
			// ス沖表示保持

			// 2000年から2100年まで表示
			for (var year = 2000; year <= 2100; year++) {
				var option = document.createElement("option");
				option.value = year;
				option.textContent = year;
				yearSelect.appendChild(option);
			}

			var monthSelect = document.getElementById("monthDropdown");
			// 初期表示は未入力状態
			defaultOption = document.createElement("option");
			defaultOption.value = "";
			defaultOption.textContent = "";
			monthSelect.appendChild(defaultOption);
			// 1月から12月まで表示
			for (var month = 1; month <= 12; month++) {
				var option = document.createElement("option");
				option.value = month;
				option.textContent = month;
				monthSelect.appendChild(option);
			}


		});


	</script>

</body>

</html>